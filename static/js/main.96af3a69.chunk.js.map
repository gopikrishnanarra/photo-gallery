{"version":3,"sources":["App.js","containers/container.js","actions/index.js","index.js"],"names":["GET_MLAB_IMAGES_URL","GET_SCREEN_IMAGES","GET_CLOUD_IMAGES","fetchScreenImages","axios","get","then","list","setState","screenImages","data","resources","map","res","public_id","fetchImages","images","fetchCloudImages","cloudImages","getScreenImages","this","state","image","src","imageUrl","alt","width","height","App","props","uploadedFileCloudinaryUrl","imageFile","call","prevProps","prevState","snapshot","files","uploadedFile","handleImageUpload","file","formatFileToBase64","URL","createObjectURL","request","post","field","end","err","response","console","error","body","secure_url","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","toBase64","log","className","onDrop","onImageDrop","bind","accept","multiple","getRootProps","getInputProps","Component","getInventoryData","connect","dispatch","getInventory","inventory","type","actions","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.96af3a69.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport { Image } from 'cloudinary-react';\r\nimport Dropzone from 'react-dropzone';\r\nimport axios from 'axios';\r\nimport request from 'superagent';\r\nimport './App.css'\r\n\r\nconst CLOUDINARY_UPLOAD_PRESET = 'gkupload';\r\nconst MLAB_IMAGES_API = 'https://api.mlab.com/api/1/databases/images/collections/images?apiKey=kIOuLscCmhbeSOoBEtJUYPV6vy1TMIaQ';\r\nconst GET_MLAB_IMAGES_URL = 'https://api.mlab.com/api/1/databases/images/collections/images?apiKey=kIOuLscCmhbeSOoBEtJUYPV6vy1TMIaQ';\r\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/gkimages/upload';\r\nconst GET_SCREEN_IMAGES = 'https://res.cloudinary.com/gkimages/image/list/screen.json';\r\nconst GET_CLOUD_IMAGES = 'https://res.cloudinary.com/gkimages/image/list/cloud.json';\r\n\r\nfunction fetchScreenImages() {\r\n    axios.get(GET_SCREEN_IMAGES)\r\n        .then(list => {\r\n            this.setState({\r\n                screenImages: list.data.resources.map((res) => {\r\n                    return res.public_id;\r\n                })\r\n            })\r\n        });\r\n}\r\nfunction fetchImages() {\r\n    axios.get(GET_MLAB_IMAGES_URL)\r\n        .then(list => {\r\n            this.setState({\r\n                images: list\r\n            })\r\n        });\r\n}\r\nfunction fetchCloudImages() {\r\n    axios.get(GET_CLOUD_IMAGES)\r\n        .then(list => {\r\n            this.setState({\r\n                cloudImages: list.data.resources.map((res) => {\r\n                    return res.public_id;\r\n                })\r\n            })\r\n        });\r\n}\r\n\r\nfunction getScreenImages() {\r\n    return this.state.images.data.map((image) => {\r\n        return <img src={image.imageUrl} alt=\"\" width=\"300\" height=\"200\"/>;\r\n    })\r\n}\r\nfunction getCloudImages() {\r\n    return this.state.cloudImages.map((image) => {\r\n        return <Image cloudName=\"gkimages\" publicId={image} width=\"300\" height=\"200\"/>;\r\n    })\r\n}\r\n\r\nexport default class App extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            uploadedFileCloudinaryUrl: '',\r\n            screenImages: [],\r\n            cloudImages: [],\r\n            imageFile: \"\",\r\n            imageUrl: \"\",\r\n            images: {}\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetchScreenImages.call(this);\r\n        fetchImages.call(this);\r\n        fetchCloudImages.call(this);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.state.imageUrl !== prevState.imageUrl) {\r\n            fetchScreenImages.call(this);\r\n            fetchImages.call(this);\r\n            fetchCloudImages.call(this);\r\n        }\r\n    }\r\n\r\n    onImageDrop(files) {\r\n        this.setState({\r\n            uploadedFile: files[0]\r\n        });\r\n\r\n        this.handleImageUpload(files[0]);\r\n    }\r\n\r\n    handleImageUpload(file) {\r\n        this.formatFileToBase64(file);\r\n        this.setState({\r\n            imageUrl: URL.createObjectURL(file)\r\n        });\r\n        let upload = request.post(CLOUDINARY_UPLOAD_URL)\r\n            .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\r\n            .field('file', file)\r\n            .field('tags', 'cloud');\r\n            upload.end((err, response) => {\r\n            if (err) {\r\n                console.error(err);\r\n            }\r\n\r\n            if (response.body.secure_url !== '') {\r\n                this.setState({\r\n                    uploadedFileCloudinaryUrl: response.body.secure_url\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    formatFileToBase64(file) {\r\n        const toBase64 = file => new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = error => reject(error);\r\n        });\r\n\r\n        toBase64(file).then(res => {\r\n            this.setState({\r\n                imageFile: res\r\n            }, () => {\r\n                axios.post(MLAB_IMAGES_API, {imageUrl: this.state.imageFile})\r\n            })\r\n        });\r\n    }\r\n\r\n    render() {\r\n        console.log(this.state);\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <div className=\"split left\">\r\n                        <Dropzone\r\n                            onDrop={this.onImageDrop.bind(this)}\r\n                            accept=\"image/*\"\r\n                            multiple={false}>\r\n                            {({getRootProps, getInputProps}) => {\r\n                                return (\r\n                                    <div className=\"dropFile\"\r\n                                        {...getRootProps()}\r\n                                    >\r\n                                        <input {...getInputProps()} />\r\n                                        {\r\n                                            <button className= \"upload\">drop file here, or click to upload</button>\r\n                                        }\r\n                                    </div>\r\n                                )\r\n                            }}\r\n                        </Dropzone>\r\n                    </div>\r\n                    <div className=\"split right\">\r\n                        <div>\r\n                            {this.state.images.data && getScreenImages.call(this)}\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n","import { connect } from 'react-redux'\r\nimport * as actions from '../actions'\r\nimport App from '../App'\r\nconst getInventoryData = (data) => {\r\n    return data;\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        data: getInventoryData(state.data)\r\n    }}\r\nconst mapDispatchToProps = dispatch => ({\r\n    getInventory: (inventory) => dispatch(actions.getInventory(inventory)),\r\n});\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(App)\r\n","\r\nexport const getInventory = (inventory) => ({\r\n    type: 'GET_INVENTORY',\r\n    inventory: inventory\r\n});\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from '../src/App'\r\nimport { Provider } from 'react-redux'\r\n// import {combineReducers, createStore} from 'redux'\r\nimport Container from './containers/container'\r\nimport './index.css';\r\n// import reducers from './reducers/reducer'\r\n\r\n// const store = createStore(combineReducers({\r\n//     data: reducers,\r\n// }));\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}