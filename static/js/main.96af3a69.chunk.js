(window["webpackJsonpphot-gallery"]=window["webpackJsonpphot-gallery"]||[]).push([[0],{245:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(27),l=a.n(o),r=a(85),s=a(86),c=a(93),u=a(87),m=a(94),d=(a(88),a(92)),p=a(15),g=a.n(p),h=a(90),f=a.n(h),v=(a(245),"https://api.mlab.com/api/1/databases/images/collections/images?apiKey=kIOuLscCmhbeSOoBEtJUYPV6vy1TMIaQ"),y="https://res.cloudinary.com/gkimages/image/list/screen.json",b="https://res.cloudinary.com/gkimages/image/list/cloud.json";function E(){var e=this;g.a.get(y).then((function(t){e.setState({screenImages:t.data.resources.map((function(e){return e.public_id}))})}))}function I(){var e=this;g.a.get(v).then((function(t){e.setState({images:t})}))}function U(){var e=this;g.a.get(b).then((function(t){e.setState({cloudImages:t.data.resources.map((function(e){return e.public_id}))})}))}function k(){return this.state.images.data.map((function(e){return i.a.createElement("img",{src:e.imageUrl,alt:"",width:"300",height:"200"})}))}var O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={uploadedFileCloudinaryUrl:"",screenImages:[],cloudImages:[],imageFile:"",imageUrl:"",images:{}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){E.call(this),I.call(this),U.call(this)}},{key:"componentDidUpdate",value:function(e,t,a){this.state.imageUrl!==t.imageUrl&&(E.call(this),I.call(this),U.call(this))}},{key:"onImageDrop",value:function(e){this.setState({uploadedFile:e[0]}),this.handleImageUpload(e[0])}},{key:"handleImageUpload",value:function(e){var t=this;this.formatFileToBase64(e),this.setState({imageUrl:URL.createObjectURL(e)}),f.a.post("https://api.cloudinary.com/v1_1/gkimages/upload").field("upload_preset","gkupload").field("file",e).field("tags","cloud").end((function(e,a){e&&console.error(e),""!==a.body.secure_url&&t.setState({uploadedFileCloudinaryUrl:a.body.secure_url})}))}},{key:"formatFileToBase64",value:function(e){var t=this;(function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))})(e).then((function(e){t.setState({imageFile:e},(function(){g.a.post("https://api.mlab.com/api/1/databases/images/collections/images?apiKey=kIOuLscCmhbeSOoBEtJUYPV6vy1TMIaQ",{imageUrl:t.state.imageFile})}))}))}},{key:"render",value:function(){return console.log(this.state),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",{className:"split left"},i.a.createElement(d.a,{onDrop:this.onImageDrop.bind(this),accept:"image/*",multiple:!1},(function(e){var t=e.getRootProps,a=e.getInputProps;return i.a.createElement("div",Object.assign({className:"dropFile"},t()),i.a.createElement("input",a()),i.a.createElement("button",{className:"upload"},"drop file here, or click to upload"))}))),i.a.createElement("div",{className:"split right"},i.a.createElement("div",null,this.state.images.data&&k.call(this)))))}}]),t}(n.Component),j=a(45),F=function(e){return e};Object(j.a)((function(e){return{data:F(e.data)}}),(function(e){return{getInventory:function(t){return e(function(e){return{type:"GET_INVENTORY",inventory:e}}(t))}}}))(O),a(248);l.a.render(i.a.createElement(O,null),document.getElementById("root"))},95:function(e,t,a){e.exports=a(249)}},[[95,1,2]]]);
//# sourceMappingURL=main.96af3a69.chunk.js.map