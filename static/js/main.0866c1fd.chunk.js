(window["webpackJsonpphot-gallery"]=window["webpackJsonpphot-gallery"]||[]).push([[0],{29:function(e,t,a){e.exports=a(58)},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(5),o=a.n(i),c=a(6),l=a(4),u=a(21),s=a(22),p=a(27),m=a(23),g=a(28),f=a(26),d=a(10),h=a.n(d);a(56);var v="https://api.mlab.com/api/1/databases/images/collections/images?apiKey=kIOuLscCmhbeSOoBEtJUYPV6vy1TMIaQ";function O(){var e=this;h.a.get(v).then((function(t){e.setState({images:t}),e.props.getImages(t),e.props.uploadingImage(!1)}))}function b(){return this.props.data.images.data.map((function(e){var t=function(e){var t,a,n,r,i=[],o="",c=256;for(t=0;t<256;t+=1)i[t]=String.fromCharCode(t);for(n=a=String.fromCharCode(e[0]),t=1;t<e.length;t+=1){if(i[r=e[t]])o=i[r];else{if(r!==c)return null;o=a+a.charAt(0)}n+=o,i[c++]=a+o.charAt(0),a=o}return n}(e.imageUrl);return r.a.createElement("div",null,r.a.createElement("img",{key:e._id.$oid,src:t,alt:"",className:"image"}))}))}function y(){this.props.uploadingImage(!0),h.a.post(v,{imageUrl:this.state.imageFile}),this.props.uploadImage()}var I=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={imageFile:"",images:{}},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){O.call(this)}},{key:"componentDidUpdate",value:function(e,t,a){this.props.data.getNewImages&&O.call(this)}},{key:"onImageDrop",value:function(e){this.handleImageUpload(e[0])}},{key:"handleImageUpload",value:function(e){var t=this;(function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))})(e).then((function(e){var a=function(e){for(var t,a,n={},r=[],i="",o=256,c=0;c<256;c+=1)n[String.fromCharCode(c)]=c;for(var l=0;l<e.length;l+=1)a=i+(t=e.charAt(l)),n.hasOwnProperty(a)?i=a:(r.push(n[i]),n[a]=o++,i=String(t));return""!==i&&r.push(n[i]),r}(e);t.setState({imageFile:a}),y.call(t)}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.data.imageUploading&&r.a.createElement("h1",null,"UPLOADING......"),r.a.createElement("div",null,r.a.createElement("div",{className:"split left"},r.a.createElement(f.a,{onDrop:this.onImageDrop.bind(this),accept:"image/*",multiple:!1},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",Object.assign({className:"dropFile"},t()),r.a.createElement("input",a()),r.a.createElement("button",{className:"upload"},"drop file here, or click to upload"))}))),r.a.createElement("div",{className:"split right"},r.a.createElement("div",null,this.props.data.images.data&&b.call(this)))))}}]),t}(n.Component),E=function(e){return e};var j=Object(c.b)((function(e){return{data:E(e.data)}}),(function(e){return{getImages:function(t){return e(function(e){return{type:"GET_IMAGES",images:e}}(t))},uploadImage:function(){return e({type:"UPLOAD_IMAGE"})},uploadingImage:function(t){return e(function(e){return{type:"UPLOADING_IMAGE",value:e}}(t))}}}))(I),w=(a(57),a(25));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(w.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D={images:[],getNewImages:!1,imageUploading:!1},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;return"GET_IMAGES"===t.type?A({},e,{images:t.images,getNewImages:!1}):"UPLOAD_IMAGE"===t.type?A({},e,{getNewImages:!0}):"UPLOADING_IMAGE"===t.type?A({},e,{imageUploading:t.value}):e},N=Object(l.c)(Object(l.b)({data:U}));o.a.render(r.a.createElement(c.a,{store:N},r.a.createElement(j,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.0866c1fd.chunk.js.map